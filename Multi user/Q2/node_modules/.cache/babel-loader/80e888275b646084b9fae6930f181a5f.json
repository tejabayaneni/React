{"ast":null,"code":"import _objectSpread from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/myapp/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/myapp/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport classnames from 'classnames';\nimport Prism from 'prismjs';\nimport \"./prism.css\";\nimport { HtmlRenderer, Parser } from 'commonmark';\nimport { Container, Row, Col, Jumbotron, TabContent, TabPane, Nav, NavItem, NavLink, Alert, ButtonGroup, Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport 'whatwg-fetch';\nimport config from './config.js';\nimport moment from 'moment';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      activeTab: 0,\n      tasks: [],\n      loadingTasks: false,\n      addForm: false,\n      error: '',\n      success: false,\n      deleteError: '',\n      deleteSuccess: false,\n      taskName: '',\n      dueDate: '',\n      dueTime: '00:00',\n      status: 'Open',\n      instructions: '',\n      editMode: false\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.showAddForm = _this.showAddForm.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Prism.highlightAll();\n      this.setState({\n        loadingTasks: true\n      });\n      var url = config.API_URL + 'tasks';\n      fetch(url, {}).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log('enter', json);\n\n        _this2.setState({\n          tasks: json.tasks,\n          loadingTasks: false\n        });\n      }, function (error) {\n        _this2.setState({\n          loadingTasks: false\n        });\n\n        console.log('err', error);\n      });\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle(tab) {\n      if (this.state.activeTab !== tab) {\n        this.setState({\n          activeTab: tab\n        });\n      }\n    }\n  }, {\n    key: \"showAddForm\",\n    value: function showAddForm() {\n      this.setState({\n        addForm: !this.state.addForm,\n        editMode: false,\n        taskName: '',\n        dueDate: '',\n        dueTime: '00:00',\n        status: 'Open',\n        instructions: ''\n      });\n    }\n  }, {\n    key: \"openEditModal\",\n    value: function openEditModal(data) {\n      var dueDate = moment(data.due).utc().format('YYYY-MM-DD');\n      var dueTime = moment(data.due).utc().format('HH:mm');\n      this.setState({\n        addForm: !this.state.addForm,\n        editMode: true,\n        taskName: data[\"task-name\"],\n        status: data.status,\n        dueDate: dueDate,\n        dueTime: dueTime,\n        instructions: data.instructions\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(evt) {\n      this.setState(_defineProperty({}, evt.target.name, evt.target.value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      var method = 'POST';\n      var url = config.API_URL + 'tasks/';\n\n      if (this.state.editMode) {\n        method = 'PUT';\n        url = config.API_URL + 'tasks/' + this.state.taskName;\n      }\n\n      this.setState({\n        error: '',\n        success: false\n      });\n      fetch(url, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          'task-name': this.state.taskName,\n          'due': this.state.dueDate + 'T' + this.state.dueTime + ':00.000Z',\n          //+' '+this.state.dueTime,\n          'status': this.state.status,\n          'instructions': this.state.instructions\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log('res', json);\n\n        if (json.error !== undefined && json.error !== '') {\n          console.log('error', json.error);\n\n          _this3.setState({\n            error: json.error\n          });\n        } else if (json._id !== undefined && json._id !== '') {\n          var elements = _this3.state.tasks.slice();\n\n          if (!_this3.state.editMode) {\n            elements.push({\n              'task-name': _this3.state.taskName,\n              'due': _this3.state.dueDate + 'T' + _this3.state.dueTime + ':00.000Z',\n              'status': _this3.state.status,\n              'instructions': _this3.state.instructions\n            });\n          } else {\n            var nextState = _this3.state.tasks.map(function (task, index) {\n              if (_this3.state.taskName === task[\"task-name\"]) {\n                return _objectSpread({}, task, {\n                  \"task-name\": _this3.state.taskName,\n                  due: _this3.state.dueDate + 'T' + _this3.state.dueTime + ':00.000Z',\n                  status: _this3.state.status,\n                  instructions: _this3.state.instructions\n                });\n              }\n\n              return task;\n            });\n\n            elements = nextState;\n          }\n\n          _this3.setState({\n            success: true,\n            addForm: false,\n            tasks: elements\n          });\n        } else {\n          _this3.setState({\n            error: 'Request Error!'\n          });\n        }\n      }, function (error) {\n        // this.setState({\n        //   error: error  \n        // });\n        console.log('err', error);\n\n        _this3.setState({\n          error: 'Network error!'\n        });\n      });\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(data) {\n      var _this4 = this;\n\n      console.log(data);\n      var method = 'DELETE';\n      var url = config.API_URL + 'tasks/' + data[\"task-name\"];\n      this.setState({\n        error: '',\n        success: false\n      });\n      fetch(url, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json'\n        } //body: JSON.stringify({ }) \n\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json.success) {\n          var tasks = _this4.state.tasks.filter(function (task) {\n            return data[\"task-name\"] !== task[\"task-name\"];\n          });\n\n          _this4.setState(function (state) {\n            state.tasks = tasks;\n            state.deleteSuccess = true;\n            return state;\n          });\n        } else {\n          _this4.setState({\n            deleteError: 'Request Error!'\n          });\n        }\n      }, function (error) {\n        // this.setState({\n        //   error: error  \n        // });\n        console.log('err', error);\n\n        _this4.setState({\n          deleteError: 'Network error!'\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var that = this;\n      var listItems = this.state.tasks.map(function (item, i) {\n        return React.createElement(NavItem, {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }, React.createElement(NavLink, {\n          className: classnames({\n            active: that.state.activeTab === i\n          }),\n          onClick: function onClick() {\n            that.toggle(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }, item[\"task-name\"]));\n      });\n      var parser = new Parser();\n      var renderer = new HtmlRenderer();\n      var currentIns = renderer.render(parser.parse(this.state.instructions));\n      var synHtml = Prism.highlight(currentIns, Prism.languages.markup, 'markup');\n      var listTabs = this.state.tasks.map(function (item, i) {\n        var ins = renderer.render(parser.parse(item.instructions));\n        var active = '';\n\n        if (i === that.state.activeTab) {\n          active = 'active';\n        } else {\n          active = '';\n        }\n\n        var dueDate = moment(item.due).utc().format('dddd, MMMM Do YYYY, hh:mm A');\n        return React.createElement(TabContent, {\n          key: i,\n          vertical: true,\n          activeTab: \"{this.state.activeTab}\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, React.createElement(TabPane, {\n          tabId: \"{i}\",\n          className: active,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, React.createElement(Col, {\n          sm: \"12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: ins\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }), \"Status: \", item.status, \", Due: \", dueDate), React.createElement(Col, {\n          sm: \"12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, React.createElement(ButtonGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265\n          },\n          __self: this\n        }, React.createElement(Button, {\n          color: \"primary\",\n          onClick: function onClick() {\n            that.showAddForm();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, \"Add\"), React.createElement(Button, {\n          color: \"primary\",\n          onClick: that.openEditModal.bind(that, item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, \"Update\"), React.createElement(Button, {\n          color: \"primary\",\n          onClick: that.handleDelete.bind(that, item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268\n          },\n          __self: this\n        }, \"Delete\"))))));\n      });\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"Title here\")), this.state.success && React.createElement(Alert, {\n        color: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, \"Successfully Added\"), this.state.deleteError !== '' && React.createElement(Alert, {\n        color: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, \"Error: \", this.state.deleteError), this.state.deleteSuccess && React.createElement(Alert, {\n        color: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, \"Successfully Deleted\"), this.state.addForm ? // Add Form\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"taskName\",\n        sm: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, \"Name\"), React.createElement(Col, {\n        sm: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, React.createElement(Input, {\n        disabled: this.state.editMode,\n        value: this.state.taskName,\n        onChange: this.handleChange,\n        type: \"text\",\n        name: \"taskName\",\n        id: \"taskName\",\n        placeholder: \"Enter task name\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      })), React.createElement(Col, {\n        sm: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(Input, {\n        value: this.state.status,\n        onChange: this.handleChange,\n        type: \"select\",\n        name: \"status\",\n        id: \"status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Open\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"Open\"), React.createElement(\"option\", {\n        value: \"Closed\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, \"Closed\")))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"dueDate\",\n        sm: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"Due\"), React.createElement(Col, {\n        sm: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(Input, {\n        value: this.state.dueDate,\n        onChange: this.handleChange,\n        type: \"date\",\n        name: \"dueDate\",\n        id: \"dueDate\",\n        placeholder: \"Enter due date\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      })), React.createElement(Col, {\n        sm: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, React.createElement(Input, {\n        value: this.state.dueTime,\n        onChange: this.handleChange,\n        type: \"time\",\n        name: \"dueTime\",\n        id: \"dueTime\",\n        placeholder: \"Enter due time\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(Input, {\n        rows: 10,\n        value: this.state.instructions,\n        onChange: this.handleChange,\n        type: \"textarea\",\n        name: \"instructions\",\n        id: \"instructions\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }))), this.state.error !== '' && React.createElement(Alert, {\n        color: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, \"Error: \", this.state.error), React.createElement(FormGroup, {\n        check: true,\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, \"Commit\"), React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.showAddForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, \"Cancel\"))))), React.createElement(Col, {\n        sm: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: synHtml\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }))))) : // List tasks with details \n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, listItems && listItems.length > 0 && React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        vertical: true,\n        pills: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, listItems)), React.createElement(Col, {\n        sm: \"9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(Jumbotron, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, listTabs)))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/var/www/html/myapp/src/App.js"],"names":["React","Component","classnames","Prism","HtmlRenderer","Parser","Container","Row","Col","Jumbotron","TabContent","TabPane","Nav","NavItem","NavLink","Alert","ButtonGroup","Button","Form","FormGroup","Label","Input","config","moment","App","props","state","activeTab","tasks","loadingTasks","addForm","error","success","deleteError","deleteSuccess","taskName","dueDate","dueTime","status","instructions","editMode","toggle","bind","showAddForm","handleChange","handleSubmit","highlightAll","setState","url","API_URL","fetch","then","res","json","console","log","tab","data","due","utc","format","evt","target","name","value","event","preventDefault","method","headers","body","JSON","stringify","undefined","_id","elements","slice","push","nextState","map","task","index","filter","that","listItems","item","i","active","parser","renderer","currentIns","render","parse","synHtml","highlight","languages","markup","listTabs","ins","__html","openEditModal","handleDelete","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nimport classnames from 'classnames';\nimport Prism from 'prismjs';\nimport \"./prism.css\";\nimport { HtmlRenderer, Parser } from 'commonmark';\nimport { \n    Container,Row,Col,Jumbotron,\n    TabContent, TabPane,Nav, NavItem, NavLink,\n    Alert, ButtonGroup,Button,\n    Form, FormGroup, Label, Input,\n} from 'reactstrap';\nimport 'whatwg-fetch';\nimport config from './config.js';\nimport moment from 'moment';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.state={\n      activeTab: 0,\n      tasks:[],\n      loadingTasks: false,\n      addForm:false,\n      error:'',\n      success:false,\n      deleteError:'',\n      deleteSuccess:false,\n      taskName:'',\n      dueDate:'',\n      dueTime:'00:00',\n      status:'Open',\n      instructions:'',\n      editMode:false\n    }\n    \n    this.toggle = this.toggle.bind(this);\n    this.showAddForm = this.showAddForm.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    \n  }\n\n  componentDidMount() {\n    Prism.highlightAll();\n    \n    this.setState({ loadingTasks:true});\n\n    let url = config.API_URL+'tasks';\n    fetch(url,{}).then(res => res.json())\n    .then(json => {\n      console.log('enter',json);\n      this.setState({\n        tasks: json.tasks,\n        loadingTasks:false\n      });\n    }, error =>{\n      this.setState({ loadingTasks:false});\n      console.log('err',error);\n    });\n  }\n\n  toggle(tab) {\n    if (this.state.activeTab !== tab) {\n      this.setState({\n        activeTab: tab\n      });\n    }\n  }\n  \n  showAddForm(){\n    this.setState({\n      addForm: !this.state.addForm,\n      editMode:false,\n      taskName:'',\n      dueDate:'',\n      dueTime:'00:00',\n      status:'Open',\n      instructions:'',\n    });\n  }\n\n  openEditModal (data) {\n    let dueDate = moment(data.due).utc().format('YYYY-MM-DD');\n    let dueTime = moment(data.due).utc().format('HH:mm');\n    \n    this.setState({\n       addForm: !this.state.addForm,\n       editMode:true,\n       taskName:data[\"task-name\"],\n       status:data.status,\n       dueDate:dueDate,\n       dueTime:dueTime,\n       instructions:data.instructions\n    });\n  }  \n\n  handleChange (evt) {\n    this.setState({ [evt.target.name]: evt.target.value });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();  \n    let method = 'POST';\n    let url = config.API_URL+'tasks/';\n    if(this.state.editMode){\n      method = 'PUT';\n      url = config.API_URL+'tasks/'+this.state.taskName;\n    }\n    \n    this.setState({\n      error: '',\n      success:false\n    });  \n    fetch(url, { \n        method: method,\n        headers: {'Content-Type':'application/json'},\n        body: JSON.stringify({\n          'task-name': this.state.taskName,\n          'due': this.state.dueDate+'T'+this.state.dueTime+':00.000Z',\n          //+' '+this.state.dueTime,\n          'status': this.state.status,\n          'instructions': this.state.instructions,\n        }) \n    })\n    .then(res => res.json())\n    .then(json => {\n      console.log('res',json);\n      if(json.error !== undefined && json.error !== ''){\n        console.log('error',json.error);\n        this.setState({\n          error: json.error  \n        });  \n      }\n      else if(json._id !== undefined && json._id !== ''){\n        let elements = this.state.tasks.slice();\n        if(!this.state.editMode){\n          elements.push({\n            'task-name': this.state.taskName,\n            'due': this.state.dueDate+'T'+this.state.dueTime+':00.000Z',\n            'status': this.state.status,\n            'instructions': this.state.instructions\n          });\n        }else{\n          const nextState = this.state.tasks.map((task,index) => {\n              if(this.state.taskName === task[\"task-name\"]){\n                return {\n                  ...task,\n                  \"task-name\": this.state.taskName,\n                  due: this.state.dueDate+'T'+this.state.dueTime+':00.000Z',\n                  status: this.state.status,\n                  instructions: this.state.instructions \n                }\n              }\n              return task;\n          });\n          elements = nextState;\n        }  \n        this.setState({\n          success: true,\n          addForm:false,\n          tasks:elements\n        });\n      }\n      else{\n        this.setState({\n          error: 'Request Error!'\n        });  \n      }\n    }, error =>{\n      // this.setState({\n      //   error: error  \n      // });\n      console.log('err',error);\n      this.setState({\n        error: 'Network error!'\n      });\n    });\n  }\n\n  handleDelete(data) {\n    console.log(data);\n    let method = 'DELETE';\n    let url = config.API_URL+'tasks/'+data[\"task-name\"];\n    \n    this.setState({\n      error: '',\n      success:false\n    });  \n    fetch(url, { \n        method: method,\n        headers: {'Content-Type':'application/json'},\n        //body: JSON.stringify({ }) \n    })\n    .then(res => res.json())\n    .then(json => {\n      if(json.success){\n        let tasks = this.state.tasks.filter((task) => {\n          return data[\"task-name\"] !== task[\"task-name\"];\n        });\n      \n        this.setState(state => {\n            state.tasks = tasks;\n            state.deleteSuccess= true;\n            return state;\n        });\n      }\n      else{\n        this.setState({\n          deleteError: 'Request Error!'\n        });  \n      }\n    }, error =>{\n      // this.setState({\n      //   error: error  \n      // });\n      console.log('err',error);\n      this.setState({\n        deleteError: 'Network error!'\n      });\n    });\n  }\n\n  render() {\n    let that=this;\n    let listItems=this.state.tasks.map(function(item,i){\n      return(\n        <NavItem key={i}>\n          <NavLink\n            className={classnames({ active: that.state.activeTab === i })}\n            onClick={() => { that.toggle(i); }}\n          >\n            {item[\"task-name\"]}\n          </NavLink>\n        </NavItem>\n      );\n    })\n    \n    let parser = new Parser()\n    let renderer = new HtmlRenderer()\n    \n    let currentIns = renderer.render(parser.parse(this.state.instructions));\n    let synHtml = Prism.highlight(currentIns, Prism.languages.markup, 'markup');\n\n    let listTabs=this.state.tasks.map(function(item,i){\n      let ins = renderer.render(parser.parse(item.instructions));\n      let active = '';\n      if(i===that.state.activeTab){\n        active = 'active';\n      }else{\n        active = '';\n      }\n      let dueDate = moment(item.due).utc().format('dddd, MMMM Do YYYY, hh:mm A');\n      \n      return(\n        <TabContent key={i} vertical activeTab=\"{this.state.activeTab}\">\n        <TabPane tabId=\"{i}\" className={active}>\n          <Row>\n            <Col sm=\"12\"><div dangerouslySetInnerHTML={{__html: ins}}></div>\n            Status: {item.status}, Due: {dueDate}\n            </Col>\n            <Col sm=\"12\">\n              <ButtonGroup>\n                <Button color=\"primary\" onClick={() => { that.showAddForm(); }}>Add</Button>\n                <Button color=\"primary\" onClick={that.openEditModal.bind(that, item)}>Update</Button>\n                <Button color=\"primary\" onClick={that.handleDelete.bind(that, item)}>Delete</Button>\n              </ButtonGroup>\n            </Col>\n          </Row>\n        </TabPane>\n        </TabContent>\n    );\n  })\n\n    return(\n        <Container>\n          <Container><h1 className=\"text-center\">Title here</h1></Container>\n          {this.state.success && <Alert color=\"success\">Successfully Added</Alert>} \n          {this.state.deleteError !== '' && <Alert color=\"warning\">Error: {this.state.deleteError}</Alert>}\n          {this.state.deleteSuccess && <Alert color=\"success\">Successfully Deleted</Alert>}  \n\n          { this.state.addForm ?\n          // Add Form\n          <div>\n            <Row>\n            <Col sm=\"6\">\n            <Form onSubmit={this.handleSubmit}>\n              <FormGroup row>\n                <Label for=\"taskName\" sm={3}>Name</Label>\n                <Col sm={5}>\n                  <Input disabled={this.state.editMode} value={this.state.taskName} onChange={this.handleChange} type=\"text\" name=\"taskName\" id=\"taskName\" placeholder=\"Enter task name\" required/>\n                </Col>\n                <Col sm=\"4\">\n                <Input value={this.state.status} onChange={this.handleChange} type=\"select\" name=\"status\" id=\"status\">\n                  <option value=\"Open\">Open</option>\n                  <option value=\"Closed\">Closed</option>\n                </Input>\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"dueDate\" sm={3}>Due</Label>\n                <Col sm={5}>\n                  <Input value={this.state.dueDate} onChange={this.handleChange} type=\"date\" name=\"dueDate\" id=\"dueDate\" placeholder=\"Enter due date\" required />\n                </Col>\n                <Col sm=\"4\">\n                  <Input value={this.state.dueTime} onChange={this.handleChange}  type=\"time\" name=\"dueTime\" id=\"dueTime\" placeholder=\"Enter due time\" required />\n                </Col>                \n              </FormGroup>\n              <FormGroup row>\n                <Col sm={12}>\n                  <Input rows={10} value={this.state.instructions} onChange={this.handleChange} type=\"textarea\" name=\"instructions\" id=\"instructions\" required />\n                </Col>\n              </FormGroup>\n              {this.state.error !== '' && <Alert color=\"warning\">Error: {this.state.error}</Alert>}\n              <FormGroup check row>\n                <ButtonGroup>\n                  <Button color=\"primary\" >Commit</Button>\n                  <Button color=\"primary\" onClick={this.showAddForm}>Cancel</Button>\n                </ButtonGroup>\n              </FormGroup>\n            </Form>\n            </Col>\n            <Col sm=\"6\">\n              <div><div dangerouslySetInnerHTML={{__html: synHtml}}></div></div>\n            </Col>\n            </Row>\n          </div>\n          :\n          // List tasks with details \n          <div>\n          { listItems && listItems.length > 0 &&\n            <Row>\n            <Col sm=\"3\">\n              <Nav vertical pills>\n                {listItems}\n              </Nav>\n            </Col>\n            <Col sm=\"9\">\n              <Jumbotron>\n                {listTabs}\n              </Jumbotron>\n            </Col>\n            </Row>}\n            </div>\n          }\n        </Container>        \n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}