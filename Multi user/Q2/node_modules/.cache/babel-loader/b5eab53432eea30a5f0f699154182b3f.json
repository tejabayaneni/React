{"ast":null,"code":"\"use strict\";\n\nfunction isContainer(node) {\n  switch (node._type) {\n    case 'document':\n    case 'block_quote':\n    case 'list':\n    case 'item':\n    case 'paragraph':\n    case 'heading':\n    case 'emph':\n    case 'strong':\n    case 'link':\n    case 'image':\n    case 'custom_inline':\n    case 'custom_block':\n      return true;\n\n    default:\n      return false;\n  }\n}\n\nvar resumeAt = function resumeAt(node, entering) {\n  this.current = node;\n  this.entering = entering === true;\n};\n\nvar next = function next() {\n  var cur = this.current;\n  var entering = this.entering;\n\n  if (cur === null) {\n    return null;\n  }\n\n  var container = isContainer(cur);\n\n  if (entering && container) {\n    if (cur._firstChild) {\n      this.current = cur._firstChild;\n      this.entering = true;\n    } else {\n      // stay on node but exit\n      this.entering = false;\n    }\n  } else if (cur === this.root) {\n    this.current = null;\n  } else if (cur._next === null) {\n    this.current = cur._parent;\n    this.entering = false;\n  } else {\n    this.current = cur._next;\n    this.entering = true;\n  }\n\n  return {\n    entering: entering,\n    node: cur\n  };\n};\n\nvar NodeWalker = function NodeWalker(root) {\n  return {\n    current: root,\n    root: root,\n    entering: true,\n    next: next,\n    resumeAt: resumeAt\n  };\n};\n\nvar Node = function Node(nodeType, sourcepos) {\n  this._type = nodeType;\n  this._parent = null;\n  this._firstChild = null;\n  this._lastChild = null;\n  this._prev = null;\n  this._next = null;\n  this._sourcepos = sourcepos;\n  this._lastLineBlank = false;\n  this._open = true;\n  this._string_content = null;\n  this._literal = null;\n  this._listData = {};\n  this._info = null;\n  this._destination = null;\n  this._title = null;\n  this._isFenced = false;\n  this._fenceChar = null;\n  this._fenceLength = 0;\n  this._fenceOffset = null;\n  this._level = null;\n  this._onEnter = null;\n  this._onExit = null;\n};\n\nvar proto = Node.prototype;\nObject.defineProperty(proto, 'isContainer', {\n  get: function get() {\n    return isContainer(this);\n  }\n});\nObject.defineProperty(proto, 'type', {\n  get: function get() {\n    return this._type;\n  }\n});\nObject.defineProperty(proto, 'firstChild', {\n  get: function get() {\n    return this._firstChild;\n  }\n});\nObject.defineProperty(proto, 'lastChild', {\n  get: function get() {\n    return this._lastChild;\n  }\n});\nObject.defineProperty(proto, 'next', {\n  get: function get() {\n    return this._next;\n  }\n});\nObject.defineProperty(proto, 'prev', {\n  get: function get() {\n    return this._prev;\n  }\n});\nObject.defineProperty(proto, 'parent', {\n  get: function get() {\n    return this._parent;\n  }\n});\nObject.defineProperty(proto, 'sourcepos', {\n  get: function get() {\n    return this._sourcepos;\n  }\n});\nObject.defineProperty(proto, 'literal', {\n  get: function get() {\n    return this._literal;\n  },\n  set: function set(s) {\n    this._literal = s;\n  }\n});\nObject.defineProperty(proto, 'destination', {\n  get: function get() {\n    return this._destination;\n  },\n  set: function set(s) {\n    this._destination = s;\n  }\n});\nObject.defineProperty(proto, 'title', {\n  get: function get() {\n    return this._title;\n  },\n  set: function set(s) {\n    this._title = s;\n  }\n});\nObject.defineProperty(proto, 'info', {\n  get: function get() {\n    return this._info;\n  },\n  set: function set(s) {\n    this._info = s;\n  }\n});\nObject.defineProperty(proto, 'level', {\n  get: function get() {\n    return this._level;\n  },\n  set: function set(s) {\n    this._level = s;\n  }\n});\nObject.defineProperty(proto, 'listType', {\n  get: function get() {\n    return this._listData.type;\n  },\n  set: function set(t) {\n    this._listData.type = t;\n  }\n});\nObject.defineProperty(proto, 'listTight', {\n  get: function get() {\n    return this._listData.tight;\n  },\n  set: function set(t) {\n    this._listData.tight = t;\n  }\n});\nObject.defineProperty(proto, 'listStart', {\n  get: function get() {\n    return this._listData.start;\n  },\n  set: function set(n) {\n    this._listData.start = n;\n  }\n});\nObject.defineProperty(proto, 'listDelimiter', {\n  get: function get() {\n    return this._listData.delimiter;\n  },\n  set: function set(delim) {\n    this._listData.delimiter = delim;\n  }\n});\nObject.defineProperty(proto, 'onEnter', {\n  get: function get() {\n    return this._onEnter;\n  },\n  set: function set(s) {\n    this._onEnter = s;\n  }\n});\nObject.defineProperty(proto, 'onExit', {\n  get: function get() {\n    return this._onExit;\n  },\n  set: function set(s) {\n    this._onExit = s;\n  }\n});\n\nNode.prototype.appendChild = function (child) {\n  child.unlink();\n  child._parent = this;\n\n  if (this._lastChild) {\n    this._lastChild._next = child;\n    child._prev = this._lastChild;\n    this._lastChild = child;\n  } else {\n    this._firstChild = child;\n    this._lastChild = child;\n  }\n};\n\nNode.prototype.prependChild = function (child) {\n  child.unlink();\n  child._parent = this;\n\n  if (this._firstChild) {\n    this._firstChild._prev = child;\n    child._next = this._firstChild;\n    this._firstChild = child;\n  } else {\n    this._firstChild = child;\n    this._lastChild = child;\n  }\n};\n\nNode.prototype.unlink = function () {\n  if (this._prev) {\n    this._prev._next = this._next;\n  } else if (this._parent) {\n    this._parent._firstChild = this._next;\n  }\n\n  if (this._next) {\n    this._next._prev = this._prev;\n  } else if (this._parent) {\n    this._parent._lastChild = this._prev;\n  }\n\n  this._parent = null;\n  this._next = null;\n  this._prev = null;\n};\n\nNode.prototype.insertAfter = function (sibling) {\n  sibling.unlink();\n  sibling._next = this._next;\n\n  if (sibling._next) {\n    sibling._next._prev = sibling;\n  }\n\n  sibling._prev = this;\n  this._next = sibling;\n  sibling._parent = this._parent;\n\n  if (!sibling._next) {\n    sibling._parent._lastChild = sibling;\n  }\n};\n\nNode.prototype.insertBefore = function (sibling) {\n  sibling.unlink();\n  sibling._prev = this._prev;\n\n  if (sibling._prev) {\n    sibling._prev._next = sibling;\n  }\n\n  sibling._next = this;\n  this._prev = sibling;\n  sibling._parent = this._parent;\n\n  if (!sibling._prev) {\n    sibling._parent._firstChild = sibling;\n  }\n};\n\nNode.prototype.walker = function () {\n  var walker = new NodeWalker(this);\n  return walker;\n};\n\nmodule.exports = Node;\n/* Example of use of walker:\n\n var walker = w.walker();\n var event;\n\n while (event = walker.next()) {\n console.log(event.entering, event.node.type);\n }\n\n */","map":null,"metadata":{},"sourceType":"script"}